<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HeFQUIN - Federation Descriptions</title>

    <!-- Prism -->
    <link href="../css/prism-coy-without-shadows.css" rel="stylesheet" />
    <script src="../js/prism_1.29.0/prism.min.js"></script>
    <script src="../js/prism_1.29.0/prism-sparql.min.js"></script>
    <script src="../js/prism_1.29.0/prism-toolbar.min.js"></script>
    <script src="../js/prism_1.29.0/prism-copy-to-clipboard.min.js"></script>
    <link href="../css/prism-toolbar.min.css" rel="stylesheet" />

    <script src="../js/mustache.min.js"></script>
    <script src="../js/script.js"></script>
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
    <div id="header"></div>

    <main>
        <h1>Describing Federations</h1>
        <p>This page explains how to describe data sources (federation members) and their access interfaces using the
            HeFQUIN <a href="http://w3id.org/hefquin/feddesc">Federation Description Vocabulary</a>. These descriptions
            are used by the HeFQUIN query engine to understand how to access and integrate the data sources
            that should be made available to a given engine instance.
        </p>

        <h2 id="basic-concepts">1. Basic Concepts</h2>
        <ul>
            <li><code>fd:FederationMember</code> - Represents a federation member (data source) that can be queried.</li>
            <li><code>fd:serviceURI</code> -       A property to specify the URI via which a federation member is identified in SERVICE clauses.</li>
            <li><code>fd:Interface</code> -        Represents the access mechanism used to query a federation member.</li>
            <li><code>fd:interface</code> -        A property linking a federation member to its interface.</li>
        </ul>

        <h2 id="interface-types">2. Interface Types</h2>
        <p>Use one of the concrete subclasses of <code>fd:Interface</code> to describe how to query the federation
            member:</p>
        <ul>
            <li><code>fd:SPARQLEndpointInterface</code> -  For federation members accessible via the SPARQL protocol</li>
            <li><code>fd:TPFInterface</code> -             For federation members accessible via Triple Pattern Fragments (TPF)</li>
            <li><code>fd:brTPFInterface</code> -           For federation members accessible via Bindings-Restricted TPF (brTPF)</li>
            <li><code>fd:RESTInterface</code> -            For federation members that are based on a REST endpoint</li>
            <li><code>fd:GraphQLEndpointInterface</code> - For federation members that are based on a GraphQL API</li>
            <li><code>fd:BoltInterface</code> -            For federation members accessible via the Bolt protocol (e.g., for Neo4j)</li>
        </ul>

        <h2 id="key-properties">3. Key Properties</h2>
        <ul>
            <li><code>fd:endpointAddress</code> -        URI of a federation member that can be accessed via a single HTTP endpoint (e.g., SPARQL, REST, and GraphQL endpoints)</li>
            <li><code>fd:exampleFragmentAddress</code> - Example URL of a fragment that can be used to access a specific subset of the dataset of a federation member (e.g., for TPF and brTPF interfaces)</li>
            <li><code>fd:vocabularyMappingsFile</code> - Link to an RDF file aligning different vocabularies</li>
            <li><code>fd:mappingConfiguration</code> -   Resource pointing to a mapping configuration for translating non-RDF data models (e.g., GraphQL, LPG) into RDF</li>
            <li><code>fd:wrapper</code> -                Link to an <code>fd:Wrapper</code> that has RML triples maps listed via a <code>fd:rmlTriplesMaps</code> property</li>
        </ul>

        <h2>4. Example Descriptions</h2>

        <h3 id="SPARQL-endpoint-example">SPARQL Endpoint</h3>
        <pre><code class="language-turtle">@prefix fd: &lt;http://www.example.org/se/liu/ida/hefquin/fd#&gt; .
@prefix ex: &lt;http://example.org/&gt; .

ex:dbpediaSPARQL
    fd:serviceURI &lt;http://dbpedia.org/sparql&gt; ;
    fd:interface [
        a fd:SPARQLEndpointInterface ;
        fd:endpointAddress &lt;http://dbpedia.org/sparql&gt;
    ] .
</code></pre>

        <h3 id="TPF-server-example">TPF Server</h3>
        <pre><code class="language-turtle">@prefix fd: &lt;http://www.example.org/se/liu/ida/hefquin/fd#&gt; .
@prefix ex: &lt;http://example.org/&gt; .

ex:dbpediaTPF
    fd:serviceURI &lt;http://fragments.dbpedia.org/2016-04/en&gt; ;
    fd:interface [
        a fd:TPFInterface ;
        fd:exampleFragmentAddress &lt;http://fragments.dbpedia.org/2016-04/en&gt;
    ] .
</code></pre>

        <h3 id="REST-endpoint-example">RML-Wrapped REST Endpoint</h3>
        <pre><code class="language-turtle">@prefix fd: &lt;http://www.example.org/se/liu/ida/hefquin/fd#&gt; .
@prefix rml: &lt;http://w3id.org/rml/&gt; .
@prefix ex: &lt;http://example.org/&gt; .

ex:openMeteo
    fd:serviceURI &lt;https://api.open-meteo.com/v1/forecast&gt; ;
    fd:interface _:openMeteoRestEndpoint ;
    fd:wrapper _:openMeteoWrapper .

_:openMeteoRestEndpoint a fd:RESTInterface ;
      fd:endpointAddress &lt;https://api.open-meteo.com/v1/forecast&gt; ;
      fd:queryParameters ( [ fd:paramName "latitude" ; fd:paramType xsd:float ]
                           [ fd:paramName "longitude" ; fd:paramType xsd:float ]
                           [ fd:paramName "current" ; fd:paramType xsd:string ] ) .

# the corresponding wrapper with two RML triples maps
_:openMeteoWrapper
      fd:rmlTriplesMaps ( _:openMeteoTM1 _:openMeteoTM2 ) .

_:openMeteoTM1
      rml:logicalSource [ rml:source _:openMeteoRestEndpoint ;
                          rml:referenceFormulation rml:JSONPath ;
                          rml:iterator "$.current" ] ;
      rml:subjectMap [ rml:termType rml:BlankNode ;
                       rml:reference "time" ];
      rml:predicateObjectMap [ rml:predicateMap [ rml:constant ex:temperature ] ;
                               rml:objectMap [ rml:reference "temperature_2m" ; rml:datatype xsd:double ] ] .

_:openMeteoTM2
      rml:logicalSource [ rml:source _:openMeteoRestEndpoint ;
                          rml:referenceFormulation rml:JSONPath ;
                          rml:iterator "$.current" ] ;
      rml:subjectMap [ rml:termType rml:BlankNode ;
                       rml:reference "time" ];
      rml:predicateObjectMap [ rml:predicateMap [ rml:constant ex:windSpeed ] ;
                               rml:objectMap [ rml:reference "wind_speed_10m" ; rml:datatype xsd:double ] ] .
</code></pre>

        <h3 id="Neo4j-example">Neo4j</h3>
        <pre><code class="language-turtle">@prefix fd: &lt;http://www.example.org/se/liu/ida/hefquin/fd#&gt; .
@prefix lpg2rdf: &lt;http://w3id.org/hefquin/lpg2rdf#&gt; .
@prefix ex: &lt;http://example.org/&gt; .

ex:neo4jTest
    a fd:FederationMember ;
    fd:serviceURI &lt;http://localhost:7474/neo4j&gt; ;
    fd:interface [
        a fd:BoltInterface ;
        fd:endpointAddress &lt;http://localhost:7474/db/neo4j/tx&gt; ;
        fd:mappingConfiguration [
            a lpg2rdf:LPGToRDFConfiguration ;
            # ...
        ]
    ] .
</code></pre>
    </main>

    <div id="footer"></div>
</body>

</html>
