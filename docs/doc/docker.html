<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HeFQUIN - Running a HeFQUIN Service via Docker</title>

    <!-- Prism -->
    <link href="../css/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="../js/prism_1.29.0/prism.min.js"></script>
    <script src="../js/prism_1.29.0/prism-python.min.js"></script>
    <script src="../js/prism_1.29.0/prism-java.min.js"></script>
    <script src="../js/prism_1.29.0/prism-bash.min.js"></script>
    <script src="../js/prism_1.29.0/prism-toolbar.min.js"></script>
    <script src="../js/prism_1.29.0/prism-copy-to-clipboard.min.js"></script>
    <link href="../css/prism-toolbar.min.css" rel="stylesheet" />
    <script src="../js/highlight.js"></script>

    <script src="../js/mustache.min.js"></script>
    <script src="../js/script.js"></script>
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
    <div id="header"></div>

    <main>
        <h1>Running a HeFQUIN Service via Docker</h1>
        <p>
            HeFQUIN can be deployed as a web service in a Docker container, either <a href="#use-published-image">using one of our published Docker images</a> or <a href="#build-docker-image">using a Docker image that you build yourself</a>. In either case, after starting it up, you can <a href="hefquin_service.html">interact with the service like a SPARQL endpoint</a>.
        </p>

        <section id="use-published-image">
            <h2>Use a Published Docker Image</h2>
            <p>
                For each release of HeFQUIN, we publish a Docker image at the <a href="https://ghcr.io/">GitHub Container Registry</a>. You can pull the image for the latest release by executing the following command.
            </p>
            <pre><code class="language-bash">docker pull ghcr.io/LiUSemWeb/hefquin:latest</code></pre>
            <p>
                Thereafter, execute the following command to start the HeFQUIN service using Docker, the <code>-p</code> argument specifies the port at which the HeFQUIN service shall expose its SPARQL endpoint.
            </p>
            <pre><code class="language-bash">docker run -p 8080:8080 hefquin:latest</code></pre>
            <p>
                Now, the HeFQUIN service should be running, which you can test by opening <code><a href="http://localhost:8080/">http://localhost:8080/</a></code> in a Web browser, and you can <a href="hefquin_service.html">interact with the service like a SPARQL endpoint</a> (the SPARQL endpoint should be exposed at <code>http://localhost:8080/sparql</code>).
            </p>
            <p>
                To use the HeFQUIN service for your own federation, create a <a href="federation_description.html">description of your federation</a> and, then, mount the file with this description (e.g., <code>MyFedConf.ttl</code>) when starting the HeFQUIN service using Docker as follows.
            </p>
            <pre><code class="language-bash">docker run \
    -p 8080:8080 \
    -v MyFedConf.ttl:/usr/local/tomcat/webapps/ROOT/DefaultFedConf.ttl \
    hefquin:latest
</code></pre>
            <p>
                Additionally, you can use a custom configuration file for the HeFQUIN engine (e.g., <code>MyEngineConf.ttl</code>).
            </p>
                <pre><code class="language-bash">docker run \
    -p 8080:8080 \
    -v MyFedConf.ttl:/usr/local/tomcat/webapps/ROOT/DefaultFedConf.ttl \
    -v MyEngineConf.ttl:/usr/local/tomcat/webapps/ROOT/DefaultEngineConf.ttl \
    hefquin:latest
</code></pre>
        </section>

        <section id="build-docker-image">
            <h2>Build a Docker Image Yourself</h2>
            <p>
                Instead of <a href="#use-published-image">using one of our published Docker images</a>, you may also build such an image yourself and use that one. To this end, you need a local clone of the <a href="https://github.com/LiUSemWeb/HeFQUIN">GitHub repository of HeFQUIN</a>. If you have not cloned the repository already, you can clone it either by using the SSH URL:
                <pre><code class="language-bash">git clone git@github.com:LiUSemWeb/HeFQUIN.git</code></pre>
                or by using the HTTP URL:
                <pre><code class="language-bash">git clone https://github.com/LiUSemWeb/HeFQUIN.git</code></pre>
            </p>
            <p>
                Within the directory into which you have cloned the repo, change into the <code>hefquin-docker</code> subdirectory:
                <pre><code class="language-bash">cd hefquin-docker</code></pre>
            </p>
            <p>
                Now, execute the following two commands to build the Docker image and to start the HeFQUIN service using this image.
                <pre><code class="language-bash">docker-compose build
docker-compose up
</code></pre>
            </p>
            <p>
                Now, the HeFQUIN service should be running, which you can test by opening <code><a href="http://localhost:8080/">http://localhost:8080/</a></code> in a Web browser, and you can <a href="hefquin_service.html">interact with the service like a SPARQL endpoint</a> (the SPARQL endpoint should be exposed at <code>http://localhost:8080/sparql</code>).
            </p>
            <p>
                If you want to build the Docker image for a specific version of HeFQUIN, specify the release tag of that version at the <code>TAG</code> argument in the <code>docker-compose.yml</code> file before running the aforementioned <code>docker-compose</code> commands.
            </p>
            <pre><code class="language-yaml">  hefquin:
    build:
      context: .
      args:
        TAG: XYZ   ### replace XYZ by the tag
    ports:
      - "8080:8080"
</code></pre>
            <p>
                To use the HeFQUIN service for your own federation, create a <a href="federation_description.html">description of your federation</a> and, then, extend the <code>docker-compose.yml</code> file to mount the file with this description (e.g., <code>MyFedConf.ttl</code>) when starting the HeFQUIN service using your Docker image.
            </p>
            <pre><code class="language-yaml">  hefquin:
    build: .
    ports:
      - "8080:8080"
    volumes:
     - MyFedConf.ttl:/usr/local/tomcat/webapps/ROOT/DefaultFedConf.ttl
</code></pre>
            <p>
                Additionally, you can use a custom configuration file for the HeFQUIN engine (e.g., <code>MyEngineConf.ttl</code>).
            </p>
            <pre><code class="language-yaml">  hefquin:
    build: .
    ports:
      - "8080:8080"
    volumes:
     - MyFedConf.ttl:/usr/local/tomcat/webapps/ROOT/DefaultFedConf.ttl
     - MyEngineConf:/usr/local/tomcat/webapps/ROOT/DefaultEngineConf.ttl
</code></pre>

        </section>

    </main>

    <div id="footer"></div>
</body>

</html>
